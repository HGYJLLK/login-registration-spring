<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>流水记录</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
        }

        .header h2 {
            color: #333;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            margin-bottom: 15px;
        }

        .btn {
            padding: 8px 16px;
            text-decoration: none;
            border: 1px solid #333;
            background: white;
            color: #333;
            font-size: 14px;
            display: inline-block;
        }

        .btn:hover {
            background: #333;
            color: white;
        }

        table {
            width: 100%;
            background: white;
            border-collapse: collapse;
            border: 1px solid #ddd;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }

        th {
            background: #f8f8f8;
            font-weight: 600;
            color: #333;
        }

        .type-recharge {
            color: #4CAF50;
            font-weight: 600;
        }

        .type-consume {
            color: #f44336;
            font-weight: 600;
        }

        .empty {
            text-align: center;
            padding: 40px;
            color: #999;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h2>流水记录</h2>
        <p>卡号：<span th:text="${card != null ? card.cardNo : ''}"></span> | 当前余额：<span th:text="${card != null ? card.balance + ' 元' : ''}"></span></p>
        <a th:href="@{/card/detail(id=${card.id})}" class="btn">返回详情</a>
        <a href="/card/list" class="btn">返回列表</a>
    </div>

    <table>
        <thead>
        <tr>
            <th>时间</th>
            <th>卡号</th>
            <th>类型</th>
            <th>金额</th>
            <th>操作后余额</th>
            <th>备注</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${#lists.isEmpty(records)}">
            <td colspan="6" class="empty">暂无流水记录</td>
        </tr>
        <tr th:each="record : ${records}">
            <td th:text="${#dates.format(record.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></td>
            <td th:text="${record.cardNo}"></td>
            <td>
                <span th:class="${record.type == '充值' ? 'type-recharge' : 'type-consume'}" th:text="${record.type}"></span>
            </td>
            <td th:text="${record.amount} + ' 元'"></td>
            <td th:text="${record.balanceAfter} + ' 元'"></td>
            <td th:text="${record.remark != null ? record.remark : '-'}"></td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>