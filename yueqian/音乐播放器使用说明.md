# 音乐播放器集成说明

## 项目概述

已成功将音乐播放器功能集成到现有的登录注册系统中。项目包含：

- **后端**：Spring Boot (端口 8082)
- **前端**：Vue 3 + Vite (yueqian_homework目录，端口 3000)
- **音乐资源**：music-server目录

## 已完成的功能

### 1. 后端 Spring Boot (yueqian目录)

#### 创建的实体类
- `Singer.java` - 歌手实体
- `Song.java` - 歌曲实体

#### Repository接口
- `SingerRepository.java` - 歌手数据访问
- `SongRepository.java` - 歌曲数据访问

#### Service层
- `MusicService.java` - 音乐业务逻辑

#### Controller层
- `MusicController.java` - REST API接口
  - `/music/singer` - 获取所有歌手
  - `/music/singer/name/detail` - 搜索歌手
  - `/music/song` - 获取所有歌曲
  - `/music/song/detail` - 获取歌曲详情
  - `/music/song/singer/detail` - 根据歌手ID获取歌曲
  - `/music/song/singerName/detail` - 搜索歌曲

#### 配置
- `WebConfig.java` - 静态资源配置，支持访问 `/music-server/**`
- `SecurityConfig.java` - 已添加音乐API和静态资源的访问权限

### 2. 数据库 (queqian)

已创建以下表：
- `tb_singer` - 歌手表 (10条初始数据)
- `tb_song` - 歌曲表 (18条初始数据)
- `tb_playlist` - 歌单表
- `tb_playlist_song` - 歌单歌曲关联表

### 3. 前端 Vue 3 (yueqian_homework目录)

#### API配置
- `src/api/music.js` - 音乐相关API接口封装

#### 组件
- `src/components/MusicPlayer.vue` - 音乐播放器组件
  - 支持播放/暂停
  - 上一首/下一首
  - 进度条拖动
  - 音量控制
  - 显示歌曲信息和封面

#### 页面
- `src/views/MusicList.vue` - 音乐列表页面
  - 歌手列表展示
  - 歌曲列表展示
  - 搜索功能
  - 点击歌手查看该歌手的所有歌曲
  - 点击歌曲开始播放

#### 路由
- 已添加 `/home/music` 路由
- 在侧边栏菜单中添加了"音乐播放器"菜单项

## 启动步骤

### 1. 启动后端

```bash
# 在 yueqian 目录下
./mvnw spring-boot:run

# 或者如果已经编译过
java -jar target/login-registration-0.0.1-SNAPSHOT.jar
```

后端将在 http://localhost:8082 启动

### 2. 启动前端

```bash
# 在 yueqian_homework 目录下
npm install  # 首次运行需要安装依赖
npm run dev
```

前端将在 http://localhost:3000 启动

## 使用说明

1. **登录系统**
   - 访问 http://localhost:3000
   - 使用已有账号登录或注册新账号

2. **进入音乐播放器**
   - 登录后，点击左侧菜单的"音乐播放器"

3. **使用功能**
   - 浏览歌手列表，点击歌手查看该歌手的歌曲
   - 使用搜索框搜索歌曲或歌手
   - 点击歌曲列表中的"播放"按钮或直接点击歌曲行
   - 使用底部播放器控制音乐播放

## 技术特点

### 后端
- Spring Boot 3.4.5
- Spring Data JPA
- MySQL数据库
- RESTful API设计

### 前端
- Vue 3 Composition API
- Vite构建工具
- Element Plus UI组件库
- Axios HTTP客户端

### 音乐资源
- 18首示例歌曲（周杰伦、林俊杰、张杰等歌手）
- 歌手头像图片
- 歌曲封面图片

## 注意事项

1. **数据库配置**
   - 确保MySQL服务正在运行
   - 数据库名：queqian
   - 用户名：root
   - 密码：2333
   - 已执行 `music_database_setup.sql` 创建表和初始数据

2. **静态资源访问**
   - music-server目录必须在项目根目录下
   - 音乐文件和图片通过 `/music-server/**` 路径访问

3. **代理配置**
   - 前端开发服务器已配置代理
   - `/api` -> `http://localhost:8082`
   - `/music-server` -> `http://localhost:8082`

## 目录结构

```
yueqian/
├── src/main/java/com/example/login/
│   ├── controller/
│   │   ├── AuthController.java
│   │   ├── UserController.java
│   │   └── MusicController.java (新增)
│   ├── model/
│   │   ├── User.java
│   │   ├── Singer.java (新增)
│   │   ├── Song.java (新增)
│   │   ├── SingerRepository.java (新增)
│   │   └── SongRepository.java (新增)
│   ├── service/
│   │   ├── AuthService.java
│   │   └── MusicService.java (新增)
│   └── config/
│       ├── SecurityConfig.java (已更新)
│       └── WebConfig.java (新增)
├── music-server/ (音乐资源)
├── yueqian_homework/ (Vue3前端)
│   ├── src/
│   │   ├── api/
│   │   │   └── music.js (新增)
│   │   ├── components/
│   │   │   └── MusicPlayer.vue (新增)
│   │   └── views/
│   │       └── MusicList.vue (新增)
└── music_database_setup.sql (数据库脚本)
```

## 扩展建议

1. **歌词显示**：可以为歌曲添加歌词字段，在播放时显示歌词

2. **播放历史**：记录用户的播放历史

3. **收藏功能**：允许用户收藏喜欢的歌曲

4. **歌单管理**：实现自定义歌单功能

5. **文件上传**：添加音乐文件上传功能

6. **音乐可视化**：添加音频可视化效果
